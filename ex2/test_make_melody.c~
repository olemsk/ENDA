#include <stdint.h>
#include <stdbool.h>
#include "efm32gg.h"
#include "Beep1.c"
#include "Beep2.c"
#include "mcg.c"

int counter = 0;

bool isFinished = true;

void start_LET(void);
void stop_LET(void);

int Beep1_length = 1409;
 int Beep2_length = 1409;
int mcglength= 24576;

void control_music(uint32_t inn)
{	startDAC();
	const uint16_t *song; // vektor med sangene
	  int songlength; // må lages i sound filene
	if(isFinished)
{
	switch(inn){
	
		case 1:
			song = Beep1;
			songlength = Beep1_length;
			isFinished = false;	
			break;
	
		case 2:
			
			song = Beep2;
			songlength = Beep2_length;
			
			isFinished=false;
			break;

		case 3:
			song= mcg;
			songlength= mcglength;
			
			isFinished=false;
			break;


		default:
		
			
			stopDAC();
			isFinished=true;
					
			return;
			break;
		}
}
	
	if ( counter > songlength){
		*GPIO_PA_DOUT= 0xFF<<8;
		
		counter = 0;
		isFinished = true;
		
		stopDAC();
		*TIMER1_IEN = 0;
		*TIMER1_CMD = 0x6;
		*ISER0=0x1802;
		*SCR=0x6;
	return;}
		

		*GPIO_PA_DOUT=0x00;		
		*DAC0_CH0DATA = song[counter] ;
		*DAC0_CH1DATA = song[counter] ;
		counter++;
		isFinished=false;
		*ISER0 = 0;
		*ISER0 = (1<<12);
		return;
	
	
		
		

};




